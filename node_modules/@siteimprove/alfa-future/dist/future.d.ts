import type { Applicative } from "@siteimprove/alfa-applicative";
import type { Callback } from "@siteimprove/alfa-callback";
import type { Continuation } from "@siteimprove/alfa-continuation";
import type { Functor } from "@siteimprove/alfa-functor";
import { Iterable } from "@siteimprove/alfa-iterable";
import type { Mapper } from "@siteimprove/alfa-mapper";
import type { Monad } from "@siteimprove/alfa-monad";
import type { Thenable } from "@siteimprove/alfa-thenable";
import type { Thunk } from "@siteimprove/alfa-thunk";
/**
 * {@link http://blog.higher-order.com/assets/trampolines.pdf}
 *
 * @public
 */
export declare abstract class Future<T> implements Functor<T>, Applicative<T>, Monad<T>, Thenable<T>, AsyncIterable<T> {
    protected abstract step(): Future<T>;
    then(callback: Callback<T>): void;
    get(): T;
    abstract isNow(): boolean;
    abstract isDeferred(): boolean;
    abstract isSuspended(): boolean;
    map<U>(mapper: Mapper<T, U>): Future<U>;
    apply<U>(mapper: Future<Mapper<T, U>>): Future<U>;
    abstract flatMap<U>(mapper: Mapper<T, Future<U>>): Future<U>;
    flatten<T>(this: Future<Future<T>>): Future<T>;
    tee(callback: Callback<T>): Future<T>;
    asyncIterator(): AsyncIterator<T>;
    [Symbol.asyncIterator](): AsyncIterator<T>;
    toPromise(): Promise<T>;
}
/**
 * @public
 */
export declare namespace Future {
    type Maybe<T> = T | Future<T>;
    function isFuture<T>(value: AsyncIterable<T>): value is Future<T>;
    function isFuture<T>(value: unknown): value is Future<T>;
    function empty(): Future<void>;
    function now<T>(value: T): Future<T>;
    function defer<T>(continuation: Continuation<T>): Future<T>;
    function suspend<T>(thunk: Thunk<Future<T>>): Future<T>;
    function delay<T>(thunk: Thunk<T>): Future<T>;
    function from<T>(promise: Promise<T> | Thunk<Promise<T>>): Future<T>;
    function traverse<T, U>(values: Iterable<T>, mapper: Mapper<T, Future<U>, [index: number]>): Future<Iterable<U>>;
    function sequence<T>(futures: Iterable<Future<T>>): Future<Iterable<T>>;
}
//# sourceMappingURL=future.d.ts.map