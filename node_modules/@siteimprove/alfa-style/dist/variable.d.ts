import type { Array } from "@siteimprove/alfa-array";
import { Token } from "@siteimprove/alfa-css";
import type { Declaration } from "@siteimprove/alfa-dom";
import { Map } from "@siteimprove/alfa-map";
import { Option } from "@siteimprove/alfa-option";
import { Set } from "@siteimprove/alfa-set";
import { Slice } from "@siteimprove/alfa-slice";
import { Value } from "./value.js";
/**
 * Utilities for manipulating CSS variable declarations (--foo: bar)
 *
 * @internal
 */
export declare namespace Variable {
    /**
     * mapping each variable name to its declared value.
     *
     * @internal
     */
    type DefinitionMap = Map<string, Value<Slice<Token>>>;
    /**
     * Gather variables that are declared on the declarations.
     *
     * @remarks
     * The same variable may be declared several times, so we rely on
     * declarations being pre-ordered by decreasing precedence and only take
     * the first declaration.
     *
     * This builds a map from variable names to their lexed value
     * i.e. "--foo: lorem ipsum" becomes "foo => [lorem, ipsum]"
     **/
    function gather(declarations: Array<Declaration>): DefinitionMap;
    /**
     * "Flatten" a variable definition map by pre-substituting variables that are
     * defined in the map.
     * That is, take a "name => slice" map, search for all the "var(--foo)" in
     * the slice, and replace them by their value in the map. Recursively.
     */
    function flatten(variables: DefinitionMap): DefinitionMap;
    /**
     * Substitute all `var()` functions in a slice of tokens. If any syntactically
     * invalid `var()` functions are encountered, `None` is returned.
     *
     * {@link https://drafts.csswg.org/css-variables/#substitute-a-var}
     *
     * @remarks
     * This method uses a set of visited names to detect cyclic dependencies
     * between cascading variables. The set is local to each `Style` instance as
     * cyclic references can only occur between cascading variables defined on the
     * same element.
     */
    function substitute(tokens: Slice<Token>, variables: DefinitionMap, visited?: Set<string>): Option<[tokens: Slice<Token>, substituted: boolean]>;
}
//# sourceMappingURL=variable.d.ts.map